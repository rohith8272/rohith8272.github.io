---
title: ArduPilot Maintenance Tracker - Lua Odometer for Drones
description: A persistent Lua script for ArduPilot that tracks lifetime flight stats like hours, max speed, altitude, and events directly on your flight controller's SD card.
publishedAt: 10 January 2026
tags:
  - ardupilot
  - lua
  - drone
  - scripting
  - uav
---

## What is Lua Scripting in ArduPilot?

Lua is a lightweight, embeddable scripting language ideal for extending applications without altering core code. ArduPilot integrates Lua 5.3 in a sandboxed environment, allowing scripts to run on the flight controller alongside flight controls. This enables custom behaviors like monitoring sensors or automating tasks safely at low priority.[1][2][3][4]

## Features of Maintenance Tracker

This script creates a persistent "odometer" file on the SD card, surviving log rotations. It tracks boot cycles, flight count, total hours, max ground speed, max altitude, peak vibrations, geofence breaches, and battery failsafes‚Äîsaving on every disarm.[file:README.md] Data logs to `maintenance.log` in a simple key-value format for easy review.[file:README.md]

## Installation and Setup

1. **Download the script:**
   Download `maintainance_tracker.lua` and `README.md` from the repository.
   ```bash
   git clone https://github.com/rohith8272-uas-lua.git
   cd rohith8272-uas-lua
   ```

2. **Copy to SD card:**
   Insert the flight controller's SD card into your computer. Place `maintainance_tracker.lua` in the `APM/scripts/` folder. Create the folder if needed.[file:README.md][1]

3. **Enable scripting:**
   Connect via Mission Planner or QGC. Set `SCR_ENABLE` to `1` and reboot the autopilot.[5][1]

4. **Verify:**
   Check the Messages tab for: `MNT: System Loaded. Boot Count: X`. New parameters `MNT_*` appear after refresh.[file:README.md]

For SITL simulation, place in the `scripts/` folder of your working directory.[file:README.md]

## Configuration and Customization

Tune via parameters:
- `MNT_ENABLE`: 0 disables, 1 enables (default 1).
- `MNT_LOG_MASK`: Bitmask for features (1=vibration, 2=perf, 4=breaches, 8=failsafes; default 15=all).
- `MNT_RESET`: Set to 1 to clear log.[file:README.md]

Edit the script for custom logic. Use bitwise checks like `if (mask & 1) ~= 0 then` for vibration monitoring.[file:README.md][file:maintainance_tracker.lua] Access ArduPilot APIs like `ahrs:get_vibration()`, `gps:ground_speed()`, `fence:get_breaches()`.[file:maintainance_tracker.lua][1]

## Viewing Data

Download `maintenance.log` without removing the SD card:
1. In Mission Planner, press **Ctrl + F** > **MAVFtp**.
2. Select and download `maintenance.log`.[file:README.md]

Example:
```
BOOTS=42
FLIGHTS=15
TIME_MIN=124.50
MAX_VIBE=14.20
MAX_SPD=22.50
MAX_ALT=120.00
BREACHES=0
FAILSAFES=1
```
[file:README.md]

## Developing Your Own Lua Scripts

Start with ArduPilot docs for APIs. Use tables for state (e.g., `local state = {boots = 0}`).[file:maintainance_tracker.lua] Main loop via `function update()` returning `update, 1000` for 1Hz.[file:maintainance_tracker.lua][1]

- Load/save state with `io.open()`.
- Bind params: `param:add_table()`.
- Monitor arming: `arming:is_armed()`.
- Send messages: `gcs:send_text()`.[file:maintainance_tracker.lua][1]

Test in SITL first. Scripts run in parallel, prioritized low for safety.[1]


### Contribute
Fork the repo, tweak for your needs like adding GPS health or custom alerts. Open issues or PRs!

üìç Repository: [https://github.com/rohith8272-uas-lua](https://github.com/rohith8272-uas-lua)



[1](https://ardupilot.org/copter/docs/common-lua-scripts.html)
[2](https://ardupilot.org/plane/docs/common-lua-scripts.html)
[3](https://www.ninjaone.com/blog/lua-programming-language-a-beginners-guide/)
[4](https://en.wikipedia.org/wiki/Lua)
[5](https://ardupilot.org/copter/docs/common-scripting-step-by-step.html)
[6](https://www.youtube.com/watch?v=yi6IPm_A3SY)
[7](https://www.youtube.com/watch?v=EGWrmJAVWkY)
[8](https://github.com/ArduPilot/ardupilot_wiki/blob/master/common/source/docs/common-lua-scripts.rst)
[9](https://github.com/ArduPilot/ardupilot_wiki/blob/master/common/source/docs/common-scripting-step-by-step.rst)
[10](https://www.linkedin.com/posts/schaffer-andras_ardupilot-and-lua-did-you-know-lua-scripting-activity-7150612577461452800-uAlA)
[11](https://www.youtube.com/watch?v=3n80dYoJQ60)
[12](https://github.com/ArduPilot/ardupilot/blob/master/libraries/AP_Scripting/README.md)
[13](https://github.com/ArduPilot/ardupilot_wiki/blob/master/common/source/docs/common-install-sdcard.rst)
[14](https://discuss.ardupilot.org/t/about-the-ardupilot-lua-scripting-category/56225)
[15](https://blog.unmanned.tech/lua-scripting-ardupilot-guide/)
[16](https://ardupilot.org/plane/docs/common-scripting-parameters.html)
[17](https://www.youtube.com/watch?v=hCdXe1UTjK4)
[18](https://www.lua.org/pil/1.html)
[19](https://www.youtube.com/watch?v=zi-svfdcUc8)
[20](https://www.codecademy.com/learn/learn-lua)
[21](https://github.com/gridlocdev/lua-beginners-guide)
[22](https://docs.inspiredflight.com/inspired-documentation/products/additional-software/mission-planner/mission-planner-quick-mission-setup)
[23](https://ardupilot.org/plane/docs/common-scripted-aerobatics-4.4.html)
[24](https://ardupilot.org/planner/docs/mission-planner-overview.html)
[25](https://www.lua.org/start.html)
[26](https://www.youtube.com/watch?v=UdXGXjigxAo)
[27](https://ardupilot.org/planner/)
[28](https://www.youtube.com/watch?v=1srFmjt1Ib0)
[29](https://desosa.nl/projects/ardupilot/2020/03/26/under-the-hood-of-ardupilot-software-quality-and-improvements)